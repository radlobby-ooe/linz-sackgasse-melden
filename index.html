<!DOCTYPE html>
<html lang="en">
<head>
    <title>Problemstelle melden...</title>
    <!-- Pointer events polyfill for old browsers, see https://caniuse.com/#feat=pointer -->
    <script src="https://unpkg.com/elm-pep"></script>
    <style>
        .map {
            width: 100%;
            height: 400px;
        }

        * {
            box-sizing: border-box;
        }

        .row:after {
            content: "";
            display: table;
            clear: both;
        }
    </style>
</head>
<body style="background-color: rgb(240, 235, 248)">
<div id="map" class="map"></div>
<script src="main.js"></script>

<div style="margin-top: 10px; text-align: center;">
    <button id="describeF" style="max-width: 150px; height: 100%; opacity: 0.8;" disabled>
        <div><img src="assets/list.png" height="50px"/></div>
        <div style="align: center; text-align: center;">Formular<br/>&nbsp;</div>
    </button>

    <div id="firstStep" style="align: center; text-align: center;">
        <font face="Verdana">Bitte Position ausw√§hlen...</font>
    </div>
</div>

<script>
    function isMobile() {
        if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
            return true
        }
        else{
            return false
        }
    }

    function toggleButton(buttonId, visible) {
        if (window.document.documentMode) {
            // on IE do nothing
        } else {
            if (visible) {
                document.getElementById(buttonId).style.display = "inline-block";
            } else {
                document.getElementById(buttonId).style.display = "none";
            }
        }
        document.getElementById(buttonId).disabled = false;
    }

    document.getElementById('describeF').onclick = function () {
        if (pickerApi.picker.isSet()) {
            let pos = pickerApi.picker.getLocation();
            window.location.href = 'https://docs.google.com/forms/d/e/1FAIpQLSc_ALxhVTcA0TzSrniyH8R1hjzJ3cDAuh07kSdzN4XEHIJyQA/viewform?usp=pp_url&entry.1646312533=' + pos;
        }
    };

    document.addEventListener('pickerSet', event => {
        console.log('picker set');
        document.getElementById('firstStep').style.visibility = "hidden";
        toggleButton('describeF', true);
    });

    document.addEventListener('pickerUnset', event => {
        console.log('picker unset');
        document.getElementById('firstStep').style.visibility = "visible";
        toggleButton('describeF', false);
    });

    toggleButton('describeF', false);
</script>
</body>
</html>
